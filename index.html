<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Chill Videos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- âœ… Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen py-10 px-4 sm:px-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-8 text-center">ðŸŽ¬ Chill Videos (Auto-Listed)</h1>
    <div id="videos" class="space-y-10">Loading videos...</div>
  </div>

  <script>
    const GITHUB_USERNAME = "11nawid";
    const REPO_NAME = "bgvideos";
    const FOLDER = ""; // Leave blank if files are in root

    const API_URL = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${FOLDER}`;
    const RAW_URL_BASE = `https://${GITHUB_USERNAME}.github.io/${REPO_NAME}/${FOLDER}`;

    async function fetchVideos() {
      try {
        const res = await fetch(API_URL);
        const files = await res.json();

        if (!Array.isArray(files)) {
          throw new Error("GitHub API returned unexpected response.");
        }

        const videoFiles = files.filter(file => file.name.match(/\.(mp4|webm|ogg)$/i));
        const container = document.getElementById("videos");
        container.innerHTML = "";

        if (videoFiles.length === 0) {
          container.innerHTML = "<p class='text-center text-red-400'>No videos found.</p>";
          return;
        }

        videoFiles.forEach(file => {
          const fileURL = `${RAW_URL_BASE ? RAW_URL_BASE + "/" : ""}${file.name}`;
          const div = document.createElement("div");
          div.className = "bg-gray-800 rounded-lg shadow p-6";
          div.innerHTML = `
            <h3 class="text-xl font-semibold mb-4">${file.name}</h3>
            <video class="w-full max-h-[400px] rounded" src="${fileURL}" controls loop></video>
            <div class="mt-4">
              <input class="w-full bg-gray-700 text-gray-200 px-3 py-2 rounded border border-gray-600 focus:outline-none" value="${fileURL}" readonly>
              <button onclick="copyURL(this)" class="mt-2 w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded">ðŸ“‹ Copy URL</button>
            </div>
          `;
          container.appendChild(div);
        });
      } catch (err) {
        document.getElementById("videos").innerHTML = `<p class='text-center text-red-400'>Failed to load videos: ${err.message}</p>`;
      }
    }

    function copyURL(button) {
      const input = button.previousElementSibling;
      input.select();
      document.execCommand("copy");
      button.innerText = "âœ… Copied!";
      setTimeout(() => (button.innerText = "ðŸ“‹ Copy URL"), 1500);
    }

    fetchVideos();
  </script>
</body>
</html>
